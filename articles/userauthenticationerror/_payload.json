[{"data":1,"prerenderedAt":267},["ShallowReactive",2],{"content-query-UDX8GMOSeu":3,"content-query-UCbAnuTEGX":161},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"time":10,"body":11,"_type":155,"_id":156,"_source":157,"_file":158,"_stem":159,"_extension":160},"/articles/userauthenticationerror","articles",false,"","mysql用户认证问题",null,"2024-9-24",{"type":12,"children":13,"toc":153},"root",[14,22,32,46,51,64,147],{"type":15,"tag":16,"props":17,"children":19},"element","h1",{"id":18},"出错原因",[20],{"type":21,"value":18},"text",{"type":15,"tag":23,"props":24,"children":26},"pre",{"code":25},"Client does not support authentication protocol requested by server; consider upgrading MySQL client\n",[27],{"type":15,"tag":28,"props":29,"children":30},"code",{"__ignoreMap":7},[31],{"type":21,"value":25},{"type":15,"tag":33,"props":34,"children":35},"p",{},[36,38,44],{"type":21,"value":37},"这个问题是我在使用node.js + MySQL8.0时经常遇到的问题, 原因是因为MySQL8.0引入了新的认证协议--",{"type":15,"tag":28,"props":39,"children":41},{"className":40},[],[42],{"type":21,"value":43},"caching_sha2_password",{"type":21,"value":45},", 但是nodejs的mysql模块并不支持新的认证方式, 所以才会出现这个报错.",{"type":15,"tag":16,"props":47,"children":49},{"id":48},"解决方法",[50],{"type":21,"value":48},{"type":15,"tag":33,"props":52,"children":53},{},[54,56,62],{"type":21,"value":55},"解决方法很简单, 直接修改服务端的用户认证方式为nodejs支持的",{"type":15,"tag":28,"props":57,"children":59},{"className":58},[],[60],{"type":21,"value":61},"mysql_native_password",{"type":21,"value":63},"就可以了",{"type":15,"tag":23,"props":65,"children":69},{"code":66,"language":67,"meta":7,"className":68,"style":7},"\u003C!-- 修改权限 -->\nALTER USER 'username'@'hostname' IDENTIFIED WITH mysql_native_password BY 'password';\n\n\u003C!-- 刷新权限表 -->\nFLUSH PRIVILEGES;\n\n\u003C!-- 查看用户认证方式 -->\nSELECT host, user, plugin FROM mysql.user;\n","mysql","language-mysql shiki shiki-themes github-dark",[70],{"type":15,"tag":28,"props":71,"children":72},{"__ignoreMap":7},[73,84,93,103,112,121,129,138],{"type":15,"tag":74,"props":75,"children":78},"span",{"class":76,"line":77},"line",1,[79],{"type":15,"tag":74,"props":80,"children":81},{},[82],{"type":21,"value":83},"\u003C!-- 修改权限 -->\n",{"type":15,"tag":74,"props":85,"children":87},{"class":76,"line":86},2,[88],{"type":15,"tag":74,"props":89,"children":90},{},[91],{"type":21,"value":92},"ALTER USER 'username'@'hostname' IDENTIFIED WITH mysql_native_password BY 'password';\n",{"type":15,"tag":74,"props":94,"children":96},{"class":76,"line":95},3,[97],{"type":15,"tag":74,"props":98,"children":100},{"emptyLinePlaceholder":99},true,[101],{"type":21,"value":102},"\n",{"type":15,"tag":74,"props":104,"children":106},{"class":76,"line":105},4,[107],{"type":15,"tag":74,"props":108,"children":109},{},[110],{"type":21,"value":111},"\u003C!-- 刷新权限表 -->\n",{"type":15,"tag":74,"props":113,"children":115},{"class":76,"line":114},5,[116],{"type":15,"tag":74,"props":117,"children":118},{},[119],{"type":21,"value":120},"FLUSH PRIVILEGES;\n",{"type":15,"tag":74,"props":122,"children":124},{"class":76,"line":123},6,[125],{"type":15,"tag":74,"props":126,"children":127},{"emptyLinePlaceholder":99},[128],{"type":21,"value":102},{"type":15,"tag":74,"props":130,"children":132},{"class":76,"line":131},7,[133],{"type":15,"tag":74,"props":134,"children":135},{},[136],{"type":21,"value":137},"\u003C!-- 查看用户认证方式 -->\n",{"type":15,"tag":74,"props":139,"children":141},{"class":76,"line":140},8,[142],{"type":15,"tag":74,"props":143,"children":144},{},[145],{"type":21,"value":146},"SELECT host, user, plugin FROM mysql.user;\n",{"type":15,"tag":148,"props":149,"children":150},"style",{},[151],{"type":21,"value":152},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":7,"searchDepth":86,"depth":86,"links":154},[],"markdown","content:articles:userAuthenticationError.md","content","articles/userAuthenticationError.md","articles/userAuthenticationError","md",{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"time":10,"body":162,"_type":155,"_id":156,"_source":157,"_file":158,"_stem":159,"_extension":160},{"type":12,"children":163,"toc":265},[164,168,175,185,189,199,261],{"type":15,"tag":16,"props":165,"children":166},{"id":18},[167],{"type":21,"value":18},{"type":15,"tag":23,"props":169,"children":170},{"code":25},[171],{"type":15,"tag":28,"props":172,"children":173},{"__ignoreMap":7},[174],{"type":21,"value":25},{"type":15,"tag":33,"props":176,"children":177},{},[178,179,184],{"type":21,"value":37},{"type":15,"tag":28,"props":180,"children":182},{"className":181},[],[183],{"type":21,"value":43},{"type":21,"value":45},{"type":15,"tag":16,"props":186,"children":187},{"id":48},[188],{"type":21,"value":48},{"type":15,"tag":33,"props":190,"children":191},{},[192,193,198],{"type":21,"value":55},{"type":15,"tag":28,"props":194,"children":196},{"className":195},[],[197],{"type":21,"value":61},{"type":21,"value":63},{"type":15,"tag":23,"props":200,"children":201},{"code":66,"language":67,"meta":7,"className":68,"style":7},[202],{"type":15,"tag":28,"props":203,"children":204},{"__ignoreMap":7},[205,212,219,226,233,240,247,254],{"type":15,"tag":74,"props":206,"children":207},{"class":76,"line":77},[208],{"type":15,"tag":74,"props":209,"children":210},{},[211],{"type":21,"value":83},{"type":15,"tag":74,"props":213,"children":214},{"class":76,"line":86},[215],{"type":15,"tag":74,"props":216,"children":217},{},[218],{"type":21,"value":92},{"type":15,"tag":74,"props":220,"children":221},{"class":76,"line":95},[222],{"type":15,"tag":74,"props":223,"children":224},{"emptyLinePlaceholder":99},[225],{"type":21,"value":102},{"type":15,"tag":74,"props":227,"children":228},{"class":76,"line":105},[229],{"type":15,"tag":74,"props":230,"children":231},{},[232],{"type":21,"value":111},{"type":15,"tag":74,"props":234,"children":235},{"class":76,"line":114},[236],{"type":15,"tag":74,"props":237,"children":238},{},[239],{"type":21,"value":120},{"type":15,"tag":74,"props":241,"children":242},{"class":76,"line":123},[243],{"type":15,"tag":74,"props":244,"children":245},{"emptyLinePlaceholder":99},[246],{"type":21,"value":102},{"type":15,"tag":74,"props":248,"children":249},{"class":76,"line":131},[250],{"type":15,"tag":74,"props":251,"children":252},{},[253],{"type":21,"value":137},{"type":15,"tag":74,"props":255,"children":256},{"class":76,"line":140},[257],{"type":15,"tag":74,"props":258,"children":259},{},[260],{"type":21,"value":146},{"type":15,"tag":148,"props":262,"children":263},{},[264],{"type":21,"value":152},{"title":7,"searchDepth":86,"depth":86,"links":266},[],1730364767638]