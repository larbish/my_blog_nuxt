{"_path":"/articles/userauthenticationerror","_dir":"articles","_draft":false,"_partial":false,"_locale":"","title":"mysql用户认证问题","description":null,"time":"2024-9-24","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"出错原因"},"children":[{"type":"text","value":"出错原因"}]},{"type":"element","tag":"pre","props":{"code":"Client does not support authentication protocol requested by server; consider upgrading MySQL client\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"Client does not support authentication protocol requested by server; consider upgrading MySQL client\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这个问题是我在使用node.js + MySQL8.0时经常遇到的问题, 原因是因为MySQL8.0引入了新的认证协议--"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"caching_sha2_password"}]},{"type":"text","value":", 但是nodejs的mysql模块并不支持新的认证方式, 所以才会出现这个报错."}]},{"type":"element","tag":"h1","props":{"id":"解决方法"},"children":[{"type":"text","value":"解决方法"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"解决方法很简单, 直接修改服务端的用户认证方式为nodejs支持的"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"mysql_native_password"}]},{"type":"text","value":"就可以了"}]},{"type":"element","tag":"pre","props":{"code":"<!-- 修改权限 -->\nALTER USER 'username'@'hostname' IDENTIFIED WITH mysql_native_password BY 'password';\n\n<!-- 刷新权限表 -->\nFLUSH PRIVILEGES;\n\n<!-- 查看用户认证方式 -->\nSELECT host, user, plugin FROM mysql.user;\n","language":"mysql","meta":"","className":"language-mysql shiki shiki-themes github-dark","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"<!-- 修改权限 -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"ALTER USER 'username'@'hostname' IDENTIFIED WITH mysql_native_password BY 'password';\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"<!-- 刷新权限表 -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"FLUSH PRIVILEGES;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"<!-- 查看用户认证方式 -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"SELECT host, user, plugin FROM mysql.user;\n"}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:articles:userAuthenticationError.md","_source":"content","_file":"articles/userAuthenticationError.md","_stem":"articles/userAuthenticationError","_extension":"md"}