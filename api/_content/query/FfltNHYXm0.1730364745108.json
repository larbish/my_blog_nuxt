{"_path":"/articles/serversourcebashrc","_dir":"articles","_draft":false,"_partial":false,"_locale":"","title":"解决每次连接服务器都要加载配置文件","description":null,"time":"2024-10-05T00:00:00.000Z","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"今天更新后端服务, 打算进服务器重启一下后端服务, 结果发现所有的应用都消失了, 只剩下一个远古时期的"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"node.js"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"1","src":"/image/serverSourceBashrc/1.webp"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"服务器甚至没有重启过, 所有的东西就消失了."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我用来跑后端服务的"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"pm2"}]},{"type":"text","value":"也没了, 但是服务一直好好地在运行, 我寻思不能是什么黑客啥的吧, 防火墙也开了, ssh端口也改了."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"太奇怪了, 有点难蚌."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我本来都打算重新部署一遍服务了, 然后在备份数据的时候发现用户目录下是有软件的."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"2","src":"/image/serverSourceBashrc/2.webp"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这个时候我就想起了, 貌似之前在部署服务的时候要执行"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"source ~/.bashrc"}]},{"type":"text","value":"才能用命令来着的, 试了一下, 果然是要加载配置的问题."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"既然知道原因就好解决了, 就是解决每次连接服务器都要加载配置文件的问题."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"直接新建一个"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".bash_profile"}]},{"type":"text","value":"在里面写入一点代码让他自动加载"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"~/.bashrc"}]},{"type":"text","value":"文件就好了."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因为有些linux系统会默认加载"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".bash_profile"}]},{"type":"text","value":"文件, 而不是"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"~/.bashrc"}]},{"type":"text","value":", 不过为什么我当初没有把配置写到"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".bash_profile"}]},{"type":"text","value":"而不是"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"~/.bashrc"}]},{"type":"text","value":"我就不记得了("}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"打开"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"~/.bash_profile"}]},{"type":"text","value":"文件."}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"vim ~/.bash_profile\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"vim"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" ~/.bash_profile\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在文件中输入下面的内容确保每次开机都会加载"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"~/.bashrc"}]},{"type":"text","value":"."}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"if [ -f ~/.bashrc ]; then\n    source ~/.bashrc\nfi\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" [ "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"-f"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":" ~"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"/.bashrc ]; "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"then\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"    source"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" ~/.bashrc\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"fi\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":":wq"}]},{"type":"text","value":"保存退出后重新开了一个终端就能直接用命令了, 所有的东西也都正常了."}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:articles:serverSourceBashrc.md","_source":"content","_file":"articles/serverSourceBashrc.md","_stem":"articles/serverSourceBashrc","_extension":"md"}